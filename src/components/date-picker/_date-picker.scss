@import '../../globals/scss/colors';
@import '../../globals/scss/css--reset';
@import '../../globals/scss/typography';
@import '../../globals/scss/import-once';
@import 'flatpickr.scss';

@include exports('date-picker') {
  .bx--date-picker__container {
    position: relative;
  }

  .bx--date-picker[data-date-picker="no-calendar"] {
    .bx--date-picker__input {
      width: 8.125rem;
    }
  }

  .bx--date-picker[data-date-picker="no-calendar"][data-date-picker-mm-yy] {
    .bx--date-picker__input {
      width: 6.125rem;
    }
  }

  .bx--date-picker[data-date-picker="basic"] {
    .bx--date-picker__input {
      width: 9.75rem;
    }
  }

  .bx--date-picker__input {
    @include reset;
    @include helvetica;
    @include font-size('14');
    display: block;
    max-width: rem(165px);
    height: rem(40px);
    padding: 0 1rem;
    color: $text-01;
    background-color: $field-01;
    border: 1px solid transparent;
    position: relative;

    &:focus {
      @include focus-outline('border');
    }

    &:disabled {
      opacity: .5;
      cursor: not-allowed;
    }

    &:disabled:hover {
      border: 1px solid transparent;
    }

    &::-webkit-input-placeholder {
      color: $text-03;
    }
  }

  .bx--date-picker__icon {
    position: absolute;
    bottom: .7rem;
    left: .925rem;
    fill: $brand-01;
    cursor: pointer;
  }

  .bx--date-picker__icon + .bx--date-picker__input {
    padding-left: 2.75rem;
  }

  .bx--date-picker-range {
    display: flex;
    align-items: center;
    position: relative;
  }

  .bx--date-picker-range > .bx--date-picker__container:first-child {
    margin-right: .5rem;
  }

  .bx--date-picker-range .bx--date-picker__icon {
    right: -1.75rem;
    left: auto;
  }

  .bx--date-picker-range .bx--date-picker__input {
    width: 8.125rem;
  }

  .bx--date-picker-range.bx--date-picker__calendar .bx--date-picker__day.selected {
    background: none;
    border: 2px solid $brand-01;
    color: $text-01;
  }

  .bx--date-picker__calendar {
    @include layer('pop-out');
    padding: 1rem;
    width: rem(285px);
    height: rem(230px);
    border-radius: 0;
    border: none;
    overflow: hidden;

    &:before,
    &:after {
      display: none;
    }
  }

  .bx--date-picker__month .flatpickr-prev-month,
  .bx--date-picker__month .flatpickr-next-month {
    padding: 0;

    &:hover {
      svg {
        fill: $brand-01;
      }
    }
  }

  .bx--date-picker__month .flatpickr-current-month {
    @include font-size('12');
    text-transform: uppercase;
    padding: 0;

    svg {
      fill: $text-01;
    }

    .cur-month {
      margin-right: .25rem;
    }
  }

  .bx--date-picker__month .numInputWrapper .numInput {
    font-weight: 700;
    color: $text-01;
    background-color: $field-01;
    border: none;
    border-radius: 0;
    padding: .125rem;
    padding-left: .4rem;
  }

  .bx--date-picker__month .numInputWrapper span.arrowUp,
  .bx--date-picker__month .numInputWrapper span.arrowDown {
    left: 2.6rem;
    border: none;
    width: 12px;

    &:hover {
      background: none;

      &:after {
        border-bottom-color: $brand-02;
        border-top-color: $brand-02;
      }
    }

    &:after {
      border-bottom-color: $brand-01;
      border-top-color: $brand-01;
    }
  }

  .bx--date-picker__month .numInputWrapper span.arrowUp {
    top: 1px;
  }

  .bx--date-picker__month .numInputWrapper span.arrowDown {
    top: 9px;
  }

  .bx--date-picker__weekdays {
    width: rem(250px);
    max-width: rem(250px);
    min-width: rem(250px);
  }

  .bx--date-picker__weekday {
    font-weight: 700;
    color: $text-01;
  }

  .bx--date-picker__day {
    @include font-size('12');
    height: rem(25px);
    line-height: rem(30px);
    width: rem(25px);
    flex-basis: rem(25px);
    margin: .125rem .25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    padding-left: .5px;
    color: $text-01;
    border-radius: 0;

    &:hover {
      background: $ui-04;
    }

    &:focus {
      outline: none;
    }

    &.today {
      border: 2px solid $brand-01;
    }

    &.disabled {
      cursor: not-allowed;
      color: $ui-05;

      &:hover {
        background: none;
      }
    }

    &.inRange {
      background: $brand-02;
      box-shadow: -6px 0 0 $brand-02, 6px 0 0 $brand-02;
      border-radius: 0;
    }

    &.selected {
      background: $brand-01;
      color: $inverse-01;
    }

    &.startRange.selected {
      box-shadow: none;
      z-index: 2;

      + span.inRange:not(.endRange):not(.bx--date-picker__day--prev) {
        box-shadow: -20px 0 0 $brand-02, 12px 0 0 $brand-02;
      }

      + .bx--date-picker__day--prev.inRange {
        box-shadow: -20px 0 0 $brand-02, 20px 0 0 $brand-02;
      }

      + .endRange.selected:not(.inRange) {
        box-shadow: none;
      }
    }

    &.endRange.inRange {
      box-shadow: -15px 0 0 $brand-02;
      background: $ui-01;
      color: $text-01;
      border: 2px solid $brand-01;
      z-index: 3;

      &.selected {
        background: $brand-01;
        border: none;
        color: $inverse-01;
        box-shadow: none;
      }
    }

    &.bx--date-picker__day--prev.inRange {
      box-shadow: -12px 0 0 $brand-02, 20px 0 0 $brand-02;
    }

    &.startRange.inRange:not(.selected) {
      box-shadow: 15px 0 0 $brand-02;
      background: $ui-01;
      border: 2px solid $brand-01;
    }

    &.selected.startRange:not(.inRange) {
      box-shadow: 15px 0 0 $brand-02;
    }

    &.selected.endRange:not(.inRange) {
      box-shadow: -15px 0 0 $brand-02;
      z-index: 3;
    }

    &.startRange.bx--date-picker__day--prev.selected:not(.inRange) {
      box-shadow: 18px 0 0 $brand-02;
      z-index: 1;

      + .endRange.selected {
        box-shadow: none;
        z-index: 3;
      }

      + .endRange.inRange {
        box-shadow: none;
      }
    }

    &.startRange.inRange {
      z-index: 3;

      + .endRange.inRange {
        box-shadow: -18px 0 0 $brand-02;
        z-index: 1;
      }

      + span.inRange:not(.endRange) {
        &:before {
          position: absolute;
          content: '';
          top: 0;
          left: -12px;
          width: 25px;
          height: 24px;
          background: $brand-02;
          z-index: -1;
        }
      }
    }

    &.bx--date-picker__day--prev.startRange.inRange {
      z-index: 1;
      box-shadow: 18px 0 0 $brand-02;

      + .endRange.inRange {
        z-index: 3;
        box-shadow: none;
      }
    }
  }

  .bx--date-picker__days {
    width: rem(285px);
    max-width: rem(285px);
    min-width: rem(285px);
  }

  .bx--date-picker__weekdays {
    width: rem(285px);
  }

  .flatpickr-innerContainer,
  .flatpickr-rContainer,
  .flatpickr-days,
  .dayContainer {
    width: rem(250px);
    max-width: rem(250px);
    min-width: rem(250px);
    height: rem(173px);
  }
}
